<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Introducing FastText</h1>
                
            
            <article>
                
<p class="calibre2">Welcome to <em class="calibre16">fastText Quick Start Guide</em>. In this first chapter, you will find out how to install fastText and create a stable environment in which to learn how to use fastText applications as part of your Natural Language Processing applications.</p>
<p class="calibre2"><span class="calibre5">fastText is a library that helps you to generate efficient word representations and gives you support for text classification out of the box. In this book, we will take a look at a specific use case, namely machine translation, and use fastText for that. We have chosen machine translation because fastText claims that it is superior in terms of yet unknown words, and can handle different languages for which sufficiently large data sources and corpora may not be available. In different chapters, we will see how fastText fares in such cases. General techniques will also be discussed so that you will be able to extend those techniques to your specific use case. </span>We will cover the following topics in this chapter:</p>
<ul class="calibre10">
<li class="calibre11">Introducing fastText</li>
<li class="calibre11">Installing fastText in Windows, Linux, and macOS</li>
<li class="calibre11">Using a Docker image for fastText</li>
<li class="calibre11">Installing dependencies on Mac systems</li>
<li class="calibre11">Installing Python dependencies</li>
<li class="calibre11">Installing dependencies on RHEL machines using the <kbd class="calibre12">yum</kbd> package manager</li>
<li class="calibre11">Installing dependencies on Debian-based machines such as Ubuntu</li>
<li class="calibre11">Installing dependencies on Arch Linux using pacman</li>
</ul>
<p class="calibre2"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Introducing fastText</h1>
                
            
            <article>
                
<p class="calibre2">In today's interconnected world, a lot of text data gets generated around the world. This text information includes descriptions of things. Take, for example, people writing about products in Amazon reviews, or people writing about their thoughts through their Facebook posts. <strong class="calibre4">Natural Language Processing</strong> (<strong class="calibre4">NLP</strong>) is the application of machine learning and other computational techniques to understanding and representating spoken and written text. The following are the major challenges that NLP seeks to solve:</p>
<ul class="calibre10">
<li class="calibre11"><strong class="calibre1">Topic modeling</strong>: In general, texts deal with a topic. Topic modeling is frequently used to determine hidden structures or "abstract topics" that may be present in a collection of documents. An effective application of topic modeling would be summarization. For example, legal documents are quite complex and verbose, and hence systems such as these would help the reader to get the gist of the document and a high-level description of what is happening.</li>
<li class="calibre11"><strong class="calibre1">Sentence classification</strong>: Text classification is a important challenge, where we are able to take in blobs of text and classify them into different labels. For example, a system should be able to correctly classify something like "Shahrukh Khan was on fire at Dubai event" as belonging to the label "Entertainment" and another sentence, "Fire breaks out in store opposite Breach Candy Hospital," to be categorized as "News."</li>
<li class="calibre11"><strong class="calibre1">Machine translation</strong>: The total number of languages in the world is at least 3,000. About half of these languages have fewer than 10,000 speakers and about 25 percent have less than 1,000 speakers. Hence, we can imagine that a lot of languages are dying and when a language dies, collectively we lose a lot of our cultural heritage. The best translation system right now is made by Google, but it covers only 103 languages at the time of writing, so it is very important that we develop machine learning translation models that are able to train from few sources with a high degree of predictive power.</li>
<li class="calibre11"><strong class="calibre1">Question and answer (QA) systems</strong>: The focus here is to build a system that automatically answers questions based on the questions that people ask in natural language. QA systems that can be built around closed domain systems can be highly accurate as they can retrieve documents and text that are relevant to the search item.</li>
<li class="calibre11"><strong class="calibre1">Sentiment analysis</strong>: Sentiment analysis is about understanding the needs and intents that the users share when talking about something. People make choices based on emotions. The needs of many people are largely emotional and, generally, people are very forthcoming about how they feel. Creating a system that takes this into account will always add a lot of value to the business.</li>
<li class="calibre11"><strong class="calibre1">Event extraction</strong>: Use cases involve where a lot of data is stored in the form of text. For example, some legal text may be describing a "crime" event, which is followed by an "investigation" event, which is followed by multiple "hearing" events. The events themselves may be nested such that the "hearing" events may consist of a "presenting arguments" events and a "presenting evidence" events.</li>
<li class="calibre11"><strong class="calibre1">Named entity detection</strong>: The focus of building this system is to extract and classify entities or specific information as per some predefined categories, such as people, organization, geography, and so on. For example, if we take the following text: "We're used to spicy foods down here in South Texas," we can understand that the "buyer" likes "spicy foods" and his "geography" is South Texas. If there is sufficient evidence received from the data that buyers in South Texas like spicy foods, more such foods can be marketed to them.</li>
<li class="calibre11"><strong class="calibre1">Relation detection</strong>: A relation detection system parses text and identifies focal points and agents, then tries to find the relationship between them. For example, the sentence "Mike has the flu" can be converted to <kbd class="calibre12">Person-[RELATION:HAS]-&gt;Disease</kbd>. These relations can then be explored in a business context to build intelligent apps.</li>
</ul>
<p class="calibre2">The previous list has many of the problems that NLP practitioners are targeting. Depending on the use case, you can pick up any of these challenges and try to solve them in your domain. The challenge with many previous approaches and modeling techniques is that NLP requires a lot of textual data and there is a lot of contextual information in the data. It is quite hard for a computational model to get a sense of all the data in an efficient manner.<br class="calibre6"/>
NLP models up to now have only targeted English as textual data is available in English. But only 20 percent of the population of the world speak English and even among them, the majority are non-native speakers. The biggest deterrent to building non-English NLP models is the lack of data. Hence, we desperately need libraries that can build models even when the data is limited. fastText has the potential to change all that. The fastText team has published pretrained word vectors for 294 languages. B<span class="calibre5">y the time the book is published, more</span> languages <span class="calibre5">will have been added </span>to it.</p>
<p class="calibre2">In this chapter, we will see how to install fastText so that you can start tinkering with this amazing software. </p>
<p class="calibre2"/>
<div class="packt_tip">Some of the descriptions provided may not be applicable to you; for example, instructions for Mac users may not be directly relevant to Linux users and vice versa. Still, I would suggest that you read through the whole description for each of the dependencies for a better understanding.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing fastText</h1>
                
            
            <article>
                
<p class="calibre2">Depending on your operating system, you will need to make sure that you have some dependencies installed in your machine. In this section, you will get to know how to install fastText based on whether you are using a Linux, Windows, or macOS operating system. Additionally, you will get to know what additional dependencies you should install depending on your usage. My recommendation is to install all the software packages, as we will be exploring all the various ways we can use fastText in this book.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Prerequisites</h1>
                
            
            <article>
                
<p class="calibre2">FastText works on Windows, Linux, and macOS. FastText is built using the C++ language, so you will first need a good C++ compiler.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Windows</h1>
                
            
            <article>
                
<p class="calibre2">Official binaries for Windows are not available, but you can download the latest Windows binaries compiled by Meng Xuan Xia at the following link: <a href="https://github.com/xiamx/fastText/releases" class="calibre9">https://github.com/xiamx/fastText/releases</a>. To run these binaries, you will need to install Visual C++ 2017. You can download the 64-bit versions of Visual C++ from this link: <a href="https://support.microsoft.com/en-in/help/2977003/the-latest-supported-visual-c-downloads" class="calibre9">https://support.microsoft.com/en-in/help/2977003/the-latest-supported-visual-c-downloads</a>. Next, the usual way of installing, by double-clicking on the installer file for Visual C++, should install it on your Windows machine.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Linux</h1>
                
            
            <article>
                
<p class="calibre2">The list of prerequisite software that you need to install is as follows:</p>
<ul class="calibre10">
<li class="calibre11">GCC-C++; if you are using Clang, you will need 3.3 or newer</li>
<li class="calibre11">Cmake</li>
<li class="calibre11">Python 3.5 (you can work with Python 2.7, but we are going to focus on Python 3 in this book)</li>
<li class="calibre11">NumPy and SciPy</li>
<li class="calibre11">pybind</li>
</ul>
<p class="calibre2"><br class="calibre6"/>
Optional requirements, depending on your system, are as follows:</p>
<ul class="calibre10">
<li class="calibre11">Zip</li>
<li class="calibre11">Docker</li>
<li class="calibre11">Git</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing dependencies on RHEL machines supporting the yum package manager</h1>
                
            
            <article>
                
<p class="calibre2">On Linux machines, you will need to have <kbd class="calibre12">g++</kbd> installed. On Fedora/CentOS, which supports the <kbd class="calibre12">yum</kbd><span class="calibre5"> </span><span class="calibre5">package manager</span><span class="calibre5">, you can install</span> <kbd class="calibre12">g++</kbd> <span class="calibre5">using the following command. Open the Terminal or connect to the server where you are installing this using your favorite SSH tool and run the following command:</span></p>
<pre class="calibre17"><strong class="calibre1">$ sudo yum install gcc-c++</strong></pre>
<p class="calibre2">CMake should be installed by default. The official docs have the installation instructions in <kbd class="calibre12">make</kbd> and <kbd class="calibre12">cmake</kbd>. I would recommend installing <kbd class="calibre12">cmake</kbd> on your machine and using it to build fastText. You can directly install <kbd class="calibre12">cmake</kbd> using the <kbd class="calibre12">yum</kbd> generic command like before:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo yum install cmake</strong></pre>
<p class="calibre2">To get a full list of <kbd class="calibre12">cmake</kbd> commands, take a look at the following link: <a href="https://cmake.org/cmake/help/v3.2/manual/cmake.1.html" class="calibre9">https://cmake.org/cmake/help/v3.2/manual/cmake.1.html</a>.</p>
<p class="calibre2">To install the optional software, run the following command:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo yum install zip docker git-core</strong></pre>
<p class="calibre2">If you are starting on a new server and running <kbd class="calibre12">yum</kbd> commands there, then you may encounter the following warning:</p>
<pre class="calibre17"><strong class="calibre1">Failed to set locale, defaulting to C</strong></pre>
<p class="calibre2">In this case, install the <kbd class="calibre12">glibc</kbd> language pack:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo yum install glibc-langpack-en</strong></pre>
<p class="calibre2">Now, you can jump to the installation instructions for Anaconda to install the Python dependencies.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing dependencies on Debian-based machines such as Ubuntu</h1>
                
            
            <article>
                
<p class="calibre2">In Ubuntu and Debian machines, <kbd class="calibre12">apt-get</kbd> or <kbd class="calibre12">apt</kbd> is your package manager. <kbd class="calibre12">apt</kbd> is basically a wrapper around <kbd class="calibre12">apt-get</kbd> and other similar tools, and hence you should be able to use them interchangeably. I will be showing <kbd class="calibre12">apt</kbd> commands here but if you are using older versions of Ubuntu and Debian, and see that apt is not working on your machines, then you can replace <kbd class="calibre12">apt</kbd> with <kbd class="calibre12">apt-get</kbd> and it should work. Also, consider upgrading your machine if possible.<br class="calibre6"/>
<br class="calibre6"/>
Similar to Fedora, to install C++, open a Terminal or SSH into the server where you are going to install fastText and run the following command. This will also install the <kbd class="calibre12">cmake</kbd> command:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo apt update</strong><br class="title-page-name"/><strong class="calibre1">$ sudo apt install build-essential</strong></pre>
<p class="calibre2">Now install <kbd class="calibre12">cmake</kbd>:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo apt install cmake</strong></pre>
<p class="calibre2">To install the optional requirements, run the following command:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo apt install zip docker git-core</strong></pre>
<p class="calibre2">Now, check the Anaconda section to see how to install Anaconda for the Python dependencies.</p>
<div class="packt_infobox">The <kbd class="calibre18">apt</kbd> command only works from Ubuntu-16 onwards. If you are using an older Ubuntu version, you should use the <kbd class="calibre18">apt-get</kbd> command.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing dependencies on Arch Linux using pacman</h1>
                
            
            <article>
                
<p class="calibre2">The package manager of choice on Arch Linux is <kbd class="calibre12">pacman</kbd> and you can run the following command to install the essential build tools:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo pacman -S cmake make gcc-multilib</strong></pre>
<p class="calibre2">This should install the <kbd class="calibre12">make</kbd>, <kbd class="calibre12">cmake</kbd>, and <kbd class="calibre12">g++</kbd> compiler that you need to build fastText. Although Arch distributions already have Python 3.x installed, I would recommend installing Anaconda as described later in this chapter so that you don't miss out on any of the Python dependencies.</p>
<p class="calibre2">To install the optional requirements, run the following command:</p>
<pre class="calibre17"><strong class="calibre1">$ sudo pacman -S p7zip git docker</strong></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing dependencies on Mac systems</h1>
                
            
            <article>
                
<p class="calibre2">On macOS, you should have Clang installed by default, which is designed to be a drop-in replacement for the normal compilers for C, C++, and other similar languages. Check whether the version is 3.3 or later using <kbd class="calibre12">clang --version</kbd> in a Terminal. If you do not have Clang or something from the older versions, then you can install using the <kbd class="calibre12">xcode</kbd> command-line tools using a Terminal:</p>
<pre class="calibre17"><strong class="calibre1">$ xcode-select --install</strong></pre>
<p class="calibre2">A dialog should appear next that asks if you want to install the developer tools. Click on the <span class="calibre5">Install</span> button.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing Python dependencies</h1>
                
            
            <article>
                
<p class="calibre2">I recommend that you install Anaconda so that there are no issues with installing Python and using it for fastText. Detailed instructions for installing Anaconda are given on the official documentation page, which can be accessed at<a href="https://conda.io/docs/user-guide/install/linux.html" class="calibre9"> https://conda.io/docs/user-guide/install/linux.html</a>. Simply stated, if you are on Windows, then download the Windows installer, double-click on it, and then follow the instructions on the screen. Installing it using a GUI is also possible for macOS.</p>
<p class="calibre2"/>
<p class="calibre2"/>
<p class="calibre2">In the case of Linux and macOS, download the corresponding bash file and then run the following command in a Terminal:</p>
<pre class="calibre17"><strong class="calibre1">$ bash downloadedfile.sh</strong></pre>
<p class="calibre2">Please take care to download and install it using installers that are tagged for Python 3.x. The Python code snippets that will be shown in this book will be shown for Python 3.x.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing fastText on Windows</h1>
                
            
            <article>
                
<p class="calibre2">Currently, official binaries are not provided for fastText on Windows, and hence there is no GUI to install fastText on your machine. To use fastText, you will need to perform the following steps:</p>
<ol class="calibre13">
<li value="1" class="calibre11">Download the latest binary named <a href="https://github.com/xiamx/fastText/releases/download/fastText-latest-build40/fasttext-win64-latest-Release.zip" class="calibre9"><strong class="calibre1">fasttext-win64-latest-Release.zip</strong></a> from the release page provided by Xua (<a href="https://github.com/xiamx/fastText/releases" class="calibre9">https://github.com/xiamx/fastText/releases</a>).</li>
<li value="2" class="calibre11">This is a ZIP file and hence you will need to extract the contents. You will find the <kbd class="calibre12">fasttext_pic.lib</kbd>, <kbd class="calibre12">fasttext.lib</kbd>, <kbd class="calibre12">fasttext.exe</kbd>, and <kbd class="calibre12">fasttext.dll</kbd> files in the extracted folder. This folder will be your working directory for fastText:</li>
</ol>
<div class="cdpaligncenter"><img src="../images/00005.jpeg" class="calibre19"/></div>
<p class="calibre2"/>
<ol start="3" class="calibre13">
<li value="3" class="calibre11">Create a folder, <kbd class="calibre12">data</kbd> where you will keep all your data files. Now, open PowerShell and change directory to the folder.</li>
<li value="4" class="calibre11">Type <kbd class="calibre12">.\fasttext.exe</kbd> in Powershell and you should be able to see the output.</li>
</ol>
<p class="calibre2">If you don't see any output at the end, then you probably don't have Visual C++ Redistributable in your machine and will need to install that.</p>
<p class="calibre2"/>
<p class="calibre2"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Installing fastText in Linux and macOS</h1>
                
            
            <article>
                
<p class="calibre2">To install fastText, run the following commands to clone the image and build it in a Terminal:</p>
<pre class="calibre17"><strong class="calibre1"> $ git clone https://github.com/facebookresearch/fastText.git</strong><br class="title-page-name"/><strong class="calibre1"> $ cd fastText</strong><br class="title-page-name"/><strong class="calibre1"> $ mkdir build &amp;&amp; cd build &amp;&amp; cmake ..</strong><br class="title-page-name"/><strong class="calibre1"> $ make &amp;&amp; make install</strong></pre>
<p class="calibre2">In this book, a lot of focus will be on building systems for Python. So, run the following commands as well in the same directory:</p>
<pre class="calibre17"><strong class="calibre1">$ pip install .</strong></pre>
<p class="calibre2"><kbd class="calibre12">pip</kbd> is the package manager for Python. fastText assumes UTF-8 encoded text, which is the default in Python 3.x. The Python code examples in this book will be shown using Python 3.x. One of the advantages of fastText is that you can build fastText models for multiple languages and if you are not using Python 3.x, then you will not be able to take advantage of this. If that is not a concern and you are trying to use fastText using Python 2.7, then take a look at the <em class="calibre16">Appendix</em> at the end, which will give you guidelines on how to develop, keeping in mind UTF-8 in Python 2.7.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Using a Docker image for fastText</h1>
                
            
            <article>
                
<p class="calibre2">You can also use Docker to run fastText on your machine and not worry about building it. This can be done to maintain version control between specific versions and thus gives us predictability and consistency. You can get information on how to install Docker from the following link:<a href="https://docs.docker.com/install/#cloud" class="calibre9"> https://docs.docker.com/install/#cloud</a>.</p>
<p class="calibre2">After installing, start the Docker service before running the following commands:</p>
<pre class="calibre17"><strong class="calibre1"> start the docker service.</strong><br class="title-page-name"/><strong class="calibre1"> $ systemctl start docker</strong><br class="title-page-name"/> <br class="title-page-name"/><strong class="calibre1"> # run the below commands to start the fasttext container.</strong><br class="title-page-name"/><strong class="calibre1"> $ docker pull xebxeb/fasttext-docker</strong></pre>
<p class="calibre2">You should now be able to run fastText:</p>
<pre class="calibre17"><strong class="calibre1">$ mkdir -p /tmp/data &amp;&amp; mkdir -p /tmp/result<br class="title-page-name"/></strong><strong class="calibre1">$ docker run --rm -v /tmp/data:/data -v /tmp/result:/result \</strong><br class="title-page-name"/><strong class="calibre1">         -it xebxeb/fasttext-docker ./classification-example.sh</strong></pre>
<p class="calibre2"/>
<p class="calibre2"/>
<p class="calibre2">You may need to provide permissions and create the specific directories to run the <kbd class="calibre12">docker run</kbd> command.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">In this chapter, you have taken a look at how to install and start using fastText in the environment of your choice.</p>
<p class="calibre2">In the next chapter, we will be taking a look at how to train fastText models using the command line and how to use them.</p>


            </article>

            
        </section>
    </body></html>